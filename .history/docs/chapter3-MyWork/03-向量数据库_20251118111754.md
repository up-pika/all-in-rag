# 向量数据库

## 1. 定义

**向量数据库（Vector Database）** 是一种专门设计用于高效存储、管理和查询**海量高维向量数据**的数据库系统。与传统数据库处理结构化数据（如数字、文本、日期）不同，向量数据库的核心是处理由嵌入模型生成的**高维向量**（通常维度在数百到数千之间）。

简单理解：向量数据库就像是一个**智能图书馆**，它不仅能存储"书籍"（向量数据），更重要的是能够根据"书籍内容"的相似性快速找到最相关的"书籍"，而不是像传统数据库那样只能通过精确的"书名"（精确匹配）来查找。

## 2. 核心作用

在 RAG（检索增强生成）系统中，向量数据库扮演着**知识库**的角色，是连接原始数据与大语言模型的关键桥梁。**解决一个核心问题:如何快速、准确地从海量向量中找到与用户查询最相似的那几个？（高效处理高维向量的相似性搜索）**。

其主要作用包括：

### 1. 高效的相似性搜索

- **核心能力**：从海量向量中快速找到与查询向量最相似的数据
- **技术实现**：使用专门的索引算法（如HNSW、IVF）实现近似最近邻（ANN）搜索
- **性能表现**：在百万甚至数十亿级别的向量中，实现毫秒级的检索响应

### 2. 高维数据存储与管理

- 专门优化存储高维向量（通常成百上千，如384、768、1024 等维度）
- 支持向量的增、删、改、查等基本操作
- 提供持久化存储，避免每次重新构建索引

### 3. 丰富的查询能力

- **相似性搜索**：基于向量相似度找到相关内容
- **元数据过滤**：在相似性搜索的基础上，支持按标量字段过滤查询（如：`年份 > 2023`、`类别 = "技术文档"`）、范围查询和聚类分析等，满足复杂业务需求

### 4. 可扩展性与高可用

- 采用分布式架构，支持水平扩展
- 通过增加节点应对数据量增长
- 提供容错机制，确保服务稳定可靠

### 5. 数据与模型生态集成

与主流的 AI 框架（如 LangChain, LlamaIndex）和机器学习工作流无缝集成，简化了从模型训练到向量检索的应用开发流程。

## 3. 在 RAG 系统中的地位

```text
原始文档 → [嵌入模型] → 向量 → [向量数据库] → 检索相似内容 → [LLM] → 生成答案
```

向量数据库是 RAG 流程中的**核心存储与检索层**：

1. **存储阶段**：将文档通过嵌入模型转换为向量后，存入向量数据库
2. **检索阶段**：用户查询时，将查询文本转换为向量，在向量数据库中快速找到最相关的文档片段
3. **增强生成**：将检索到的相关内容作为上下文，输入给大语言模型生成最终答案

## 向量数据库 vs 传统数据库

| 维度 | 向量数据库 | 传统数据库（RDBMS如 MySQL） |
|------|-----------|----------------------|
| **核心数据类型** | 高维向量（Embeddings） | 结构化数据（文本、数字、日期） |
| **查询方式** | **相似性搜索**（ANN-语义匹配） | **精确匹配**（WHERE age = 25） |
| **索引机制** | HNSW、IVF、LSH 等 ANN 索引 | B-Tree、Hash Index |
| **主要应用场景** | AI 应用、RAG、推荐系统、图像检索、语音识别 | 业务系统、金融交易、数据报表 |
| **数据规模** | 轻松应对千亿级向量 | 通常在千万到亿级行数据，更大规模需复杂分库分表 |
| **性能特点** | 高维数据检索性能极高，计算密集型 | 结构化数据查询快，高维数据查询性能呈指数级下降 |
| **一致性** | 通常为最终一致性 | 强一致性 (ACID 事务) |

**重要提示**：向量数据库和传统数据库是**互补关系**，而非替代关系。在实际应用中，通常将两者结合使用：

- 传统数据库存储业务元数据和结构化信息
- 向量数据库专门处理 AI 模型产生的海量向量数据
