# Milvus介绍及多模态检索实战

## 本地配置Milvus环境-容器化部署Milvus-standalone

在windows环境下安装Docker，并拉取Milvus镜像，启动容器，成功启动三个Milvus容器，milvus-standalone, milvus-minio, 和 milvus-etcd。
终端验证容器正常运行，且milvus-standalone容器通过19530端口提供服务
```shell
(base) PS E:\Users\wu152\all-in-rag\code> docker ps
CONTAINER ID   IMAGE                                      COMMAND                   CREATED         STATUS                   PORTS                                                                                          NAMES
a51f61530467   milvusdb/milvus:v2.5.14                    "/tini -- milvus run…"   2 minutes ago   Up 2 minutes (healthy)   0.0.0.0:9091->9091/tcp, [::]:9091->9091/tcp, 0.0.0.0:19530->19530/tcp, [::]:19530->19530/tcp   milvus-standalone
f7d524deb4ac   quay.io/coreos/etcd:v3.5.16                "etcd -advertise-cli…"   2 minutes ago   Up 2 minutes (healthy)   2379-2380/tcp                                                                                  milvus-etcd
1330cb5ecc66   minio/minio:RELEASE.2023-03-20T20-16-18Z   "/usr/bin/docker-ent…"   2 minutes ago   Up 2 minutes (healthy)   0.0.0.0:9000-9001->9000-9001/tcp, [::]:9000-9001->9000-9001/tcp                                milvus-minio
```

## Milvus 

Milvus 是一个开源的向量数据库（Vector Database），主要用于高维向量的存储、索引和相似度检索。它的核心功能是帮助我们在大规模向量数据中，快速找到与查询向量最相似的对象（Top-K Similarity Search）。这在语义搜索、推荐系统、多模态检索、RAG（检索增强生成）等场景中非常关键。

## Milvus 架构

Milvus 是一个云原生的分布式向量数据库，采用微服务架构，分为以下四个主要层次：

1. **访问层（Access Layer）：**
   通过 Proxy 提供统一入口，负责客户端连接、请求验证和结果聚合。
   使用负载均衡（如 Nginx、Kubernetes Ingress）实现无状态服务。

2. **协调服务（Coordinator Service）：**

   包括 DataCoord、QueryCoord 和 IndexCoord，分别负责数据管理、查询调度和索引构建。  
   管理集群拓扑、分片分配和全局时间戳，确保一致性。

3. **工作节点（Worker Nodes）：**

   - **查询节点（Query Node）：** 执行 ANN 搜索，处理增量数据（Growing Segments）和历史数据（Sealed Segments）。
   - **数据节点（Data Node）：** 存储和管理向量数据，支持数据分片和副本机制。
   - **索引节点（Index Node）：** 构建向量索引（如 HNSW、IVF），支持 SIMD 和 GPU 加速。

4. **存储层（Storage Layer）：**

   - **元存储**： 使用 etcd 存储元数据快照，如集合、表定义、分区、索引等。
   - **日志代理（Log Broker）：** 使用 Pulsar 或 RocksDB 存储增量数据，支持流式更新。
   - **对象存储：** 使用 S3 或 MinIO 存储索引和元数据快照。
   - **内存/磁盘混合：** 支持热/冷数据分离，优化性能和成本。

Milvus 的计算存储分离设计允许独立扩展计算和存储资源，适合大规模分布式场景。它还通过硬件优化（如 AVX512、NVIDIA CAGRA）提升搜索性能。

## Milvus 核心组件


